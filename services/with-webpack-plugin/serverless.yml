service: with-webpack-plugin

# You can pin your service to only deploy with a specific Serverless version
# Check out our docs for more details
frameworkVersion: "2"
configValidationMode: error

provider:
  name: aws
  runtime: nodejs12.x
  lambdaHashingVersion: 20201221

  stage: dev
  region: ap-southeast-2

  apiGateway:
    shouldStartNameWithService: true

# layers:
#   baseLayer:
#     path: out_lambda/layer/nodejs
#     name: ${opt:stage, self:provider.stage, 'dev'}-base-layer
#     description: Test Layer
#     compatibleRuntimes:
#       - nodejs12.x
#     licenseInfo: PRIVATE
#     retain: false

# package:
#   exlude: []
#   # exclude:
#   #   - ./**

plugins:
  # - "@sls-next/serverless-plugin"
  - serverless-offline

functions:
  hello:
    handler: ./out_lambda/lambda/l_index/handler.render
    events:
      - http:
          path: /
          method: ANY
      - http:
          path: /{any+}
          method: ANY


  # IndexFunction:
  #   Type: AWS::Serverless::Function
  #   Properties:
  #     CodeUri: ./out_lambda/lambda/l_index
  #     Handler: handler.render
  #     Runtime: nodejs12.x
  #     Layers:
  #       - !Ref NextJSLayer
  #     Events:
  #       HelloWorld:
  #         Type: Api
  #         Properties:
  #           Path: /index
  #           Method: get

resources:

#   Outputs:
#     NewOutput:
#       Description: "Output description"
#       Value: "Example output"
